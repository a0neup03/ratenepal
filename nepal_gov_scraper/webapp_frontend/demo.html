<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üá≥üáµ Nepal Office Tracker - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 16px;
        }

        .step {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }

        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .office-card {
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .office-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .office-card.selected {
            border-color: #27ae60;
            background-color: #f8fff9;
        }

        .service-card {
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .service-card:hover {
            border-color: #3498db;
        }

        .service-card.selected {
            border-color: #27ae60;
            background-color: #f8fff9;
        }

        .timer-display {
            text-align: center;
            padding: 40px;
        }

        .timer-time {
            font-size: 64px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .timer-time.warning { color: #f39c12; }
        .timer-time.danger { color: #e74c3c; }

        .start-button {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px 40px;
            border: none;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transform: scale(1);
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
            margin-bottom: 20px;
        }

        .start-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }

        .end-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .end-button {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .success-button {
            background: #27ae60;
            color: white;
        }

        .fail-button {
            background: #e74c3c;
            color: white;
        }

        .end-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .stars {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }

        .star {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .star:hover,
        .star.selected {
            color: #f39c12;
        }

        .boolean-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .boolean-button {
            padding: 10px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .boolean-button.selected {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .next-button {
            background: #3498db;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            float: right;
        }

        .next-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .next-button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .info-box {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .success-message {
            background: #d5edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        .progress-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e1e8ed;
            color: #7f8c8d;
            font-weight: bold;
        }

        .progress-step.active {
            background: #3498db;
            color: white;
        }

        .progress-step.completed {
            background: #27ae60;
            color: white;
        }

        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üá≥üáµ Nepal Government Office Experience Tracker</h1>
            <p>‡§®‡•á‡§™‡§æ‡§≤ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ü‡•ç‡§∞‡•ç‡§Ø‡§æ‡§ï‡§∞</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-step active" id="progress-1">1</div>
            <div class="progress-step" id="progress-2">2</div>
            <div class="progress-step" id="progress-3">3</div>
            <div class="progress-step" id="progress-4">4</div>
            <div class="progress-step" id="progress-5">5</div>
        </div>

        <!-- Step 1: District Selection -->
        <div class="step active" id="step1">
            <h2>üåç ‡§Ü‡§´‡•ç‡§®‡•ã ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç (Select Your District)</h2>
            
            <div class="form-group">
                <label>‡§™‡•ç‡§∞‡§¶‡•á‡§∂ (Province):</label>
                <select id="province" onchange="updateDistricts()">
                    <option value="">‡§™‡•ç‡§∞‡§¶‡•á‡§∂ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç... (Select Province...)</option>
                    <option value="Koshi Province">Koshi Province</option>
                    <option value="Madhesh Province">Madhesh Province</option>
                    <option value="Bagmati Province">Bagmati Province</option>
                    <option value="Gandaki Province">Gandaki Province</option>
                    <option value="Lumbini Province">Lumbini Province</option>
                    <option value="Karnali Province">Karnali Province</option>
                    <option value="Sudurpashchim Province">Sudurpashchim Province</option>
                </select>
            </div>

            <div class="form-group">
                <label>‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ (District):</label>
                <select id="district" onchange="updateNext(1)" disabled>
                    <option value="">‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç... (Select District...)</option>
                </select>
            </div>

            <div class="info-box">
                <p><strong>üìä ‡§ï‡•Å‡§≤: 77 ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ‡§π‡§∞‡•Ç ‡§â‡§™‡§≤‡§¨‡•ç‡§ß</strong></p>
                <p>Total: 77 districts available</p>
            </div>

            <div class="clearfix">
                <button class="next-button" onclick="nextStep(2)" id="next1" disabled>‡§Ö‡§ó‡§æ‡§°‡§ø ‡§¨‡§¢‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç ‚Üí</button>
            </div>
        </div>

        <!-- Step 2: Office Selection -->
        <div class="step" id="step2">
            <h2>üè¢ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§∞ ‡§∏‡•á‡§µ‡§æ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç (Select Office & Service)</h2>
            
            <div class="info-box">
                <p id="location-info">üìç ‡§∏‡•ç‡§•‡§æ‡§®: </p>
            </div>

            <div class="form-group">
                <label>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø‡§ï‡•ã ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ (Office Type):</label>
                <div class="office-card" onclick="selectOfficeType('dao')">
                    <h3>District Administration Office (DAO)</h3>
                    <p>‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§® ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</p>
                    <p><small>Services: Citizenship Certificate, Various permits</small></p>
                </div>
                <div class="office-card" onclick="selectOfficeType('passport')">
                    <h3>Passport Department</h3>
                    <p>‡§∞‡§æ‡§π‡§¶‡§æ‡§®‡•Ä ‡§µ‡§ø‡§≠‡§æ‡§ó</p>
                    <p><small>Services: E-Passport Application</small></p>
                </div>
                <div class="office-card" onclick="selectOfficeType('transport')">
                    <h3>Transport Management Office</h3>
                    <p>‡§Ø‡§æ‡§§‡§æ‡§Ø‡§æ‡§§ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§® ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</p>
                    <p><small>Services: Driving License, Vehicle Registration</small></p>
                </div>
            </div>

            <div id="services-section" style="display: none;">
                <label>‡§∏‡•á‡§µ‡§æ/‡§ï‡§æ‡§Æ (Service/Task):</label>
                <div id="services-list"></div>
            </div>

            <div class="clearfix">
                <button class="next-button" onclick="nextStep(3)" id="next2" disabled>‡§ü‡§æ‡§á‡§Æ‡§∞ ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: Timer -->
        <div class="step" id="step3">
            <h2>‚è±Ô∏è ‡§≠‡§ø‡§ú‡§ø‡§ü ‡§ü‡•ç‡§∞‡•ç‡§Ø‡§æ‡§ï‡§∞ (Visit Tracker)</h2>
            
            <div class="info-box">
                <h3 id="office-info">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø: </h3>
                <p id="service-info">‡§∏‡•á‡§µ‡§æ: </p>
            </div>

            <div class="timer-display">
                <div id="timer-instructions">
                    <p style="font-size: 18px; margin-bottom: 20px;">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø‡§Æ‡§æ ‡§™‡•Å‡§ó‡•á‡§™‡§õ‡§ø ‡§ü‡§æ‡§á‡§Æ‡§∞ ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</p>
                    <p style="color: #7f8c8d; margin-bottom: 30px;">Start timer when you arrive at the office</p>
                    <button class="start-button" onclick="startTimer()">
                        üö® ‡§ü‡§æ‡§á‡§Æ‡§∞ ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç (START TIMER)
                    </button>
                </div>
                
                <div id="timer-running" style="display: none;">
                    <div class="timer-time" id="timer-display">00:00</div>
                    <p style="font-size: 18px; color: #7f8c8d; margin-bottom: 30px;">‡§™‡§∞‡•ç‡§ñ‡§æ‡§á ‡§ú‡§æ‡§∞‡•Ä... (Waiting ongoing...)</p>
                    
                    <div class="end-buttons">
                        <button class="end-button success-button" onclick="endVisit('success')">
                            ‚úÖ ‡§ï‡§æ‡§Æ ‡§≠‡§Ø‡•ã<br><small>(Service Successful)</small>
                        </button>
                        <button class="end-button fail-button" onclick="endVisit('failed')">
                            ‚ùå ‡§ï‡§æ‡§Æ ‡§≠‡§è‡§®<br><small>(Service Failed)</small>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4: Rating -->
        <div class="step" id="step4">
            <h2>üìù ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∞‡•á‡§ü‡§ø‡§ô ‡§∞ ‡§´‡§ø‡§°‡§¨‡•ç‡§Ø‡§æ‡§ï (Experience Rating & Feedback)</h2>
            
            <div class="info-box">
                <p id="visit-summary">‚è±Ô∏è ‡§ï‡•Å‡§≤ ‡§∏‡§Æ‡§Ø: </p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                <!-- Left: Star Ratings -->
                <div>
                    <h3 style="margin-bottom: 20px;">‚≠ê ‡§∞‡•á‡§ü‡§ø‡§ô‡•ç‡§ó‡§π‡§∞‡•Ç (Ratings)</h3>
                    
                    <div class="form-group">
                        <label>‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§Ö‡§®‡•Å‡§≠‡§µ (Overall Experience):</label>
                        <div class="stars" data-rating="overall"></div>
                    </div>

                    <div class="form-group">
                        <label>‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡•Ä‡§ï‡•ã ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ (Staff Behavior):</label>
                        <div class="stars" data-rating="staff"></div>
                    </div>

                    <div class="form-group">
                        <label>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø‡§ï‡•ã ‡§∏‡§´‡§æ‡§à (Office Cleanliness):</label>
                        <div class="stars" data-rating="cleanliness"></div>
                    </div>

                    <div class="form-group">
                        <label>‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ï‡•ã ‡§¶‡§ï‡•ç‡§∑‡§§‡§æ (Process Efficiency):</label>
                        <div class="stars" data-rating="efficiency"></div>
                    </div>

                    <div class="form-group">
                        <label>‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä‡§ï‡•ã ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ (Information Clarity):</label>
                        <div class="stars" data-rating="clarity"></div>
                    </div>
                </div>

                <!-- Right: Nepali Questions -->
                <div>
                    <h3 style="margin-bottom: 20px;">‚ùì ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§π‡§∞‡•Ç (Questions)</h3>
                    
                    <div class="form-group">
                        <label style="color: #e74c3c; font-weight: bold;">‡§ï‡•á ‡§§‡§™‡§æ‡§à‡§Ç‡§≤‡§æ‡§à ‡§ò‡•Å‡§∏ ‡§Æ‡§æ‡§ó‡•ç‡§Ø‡•ã? (Did they ask for bribe?)</label>
                        <div class="boolean-buttons" data-question="bribe">
                            <button class="boolean-button" data-answer="no">‚ùå ‡§õ‡•à‡§® / No</button>
                            <button class="boolean-button" data-answer="yes">‚úÖ ‡§õ / Yes</button>
                            <button class="boolean-button" data-answer="na">ü§∑ ‡§•‡§æ‡§π‡§æ ‡§õ‡•à‡§® / N/A</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>‡§§‡§™‡§æ‡§à‡§Ç‡§≤‡•á ‡§ï‡§§‡§ø‡§µ‡§ü‡§æ ‡§ï‡•ã‡§†‡§æ‡§Æ‡§æ ‡§ú‡§æ‡§®‡•Å‡§™‡§∞‡•ç‚Äç‡§Ø‡•ã?</label>
                        <div class="boolean-buttons" data-question="rooms">
                            <button class="boolean-button" data-answer="easy">‡§∏‡§ú‡§ø‡§≤‡•ã</button>
                            <button class="boolean-button" data-answer="okay">‡§†‡•Ä‡§ï‡•à</button>
                            <button class="boolean-button" data-answer="tortured">‡§¶‡•Å‡§É‡§ñ ‡§¶‡§ø‡§è ‡§Æ‡•Å‡§∞‡•ç‡§¶‡§æ‡§∞ ‡§π‡§∞‡•Å‡§≤‡•á</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>‡§§‡§™‡§æ‡§à‡§Ç‡§≤‡•á ‡§¶‡§≤‡§æ‡§≤/‡§è‡§ú‡•á‡§®‡•ç‡§ü (‡§ö‡•ã‡§∞ ‡§π‡§∞‡•Å) ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§∞‡•ç‡§®‡•Å‡§™‡§∞‡•ç‚Äç‡§Ø‡•ã?</label>
                        <div class="boolean-buttons" data-question="dalal">
                            <button class="boolean-button" data-answer="paryo">‡§™‡§∞‡•ç‚Äç‡§Ø‡•ã</button>
                            <button class="boolean-button" data-answer="parena">‡§™‡§∞‡•á‡§®</button>
                            <button class="boolean-button" data-answer="na">‡§•‡§æ‡§π‡§æ ‡§õ‡•à‡§®</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡•Ä ‡§∏‡§π‡§Ø‡•ã‡§ó‡•Ä ‡§∞ ‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞ ‡§•‡§ø‡§è?</label>
                        <div class="boolean-buttons" data-question="helpful">
                            <button class="boolean-button" data-answer="thiye">‡§•‡§ø‡§è</button>
                            <button class="boolean-button" data-answer="thiyenan">‡§•‡§ø‡§è‡§®‡§®‡•ç</button>
                            <button class="boolean-button" data-answer="na">‡§•‡§æ‡§π‡§æ ‡§õ‡•à‡§®</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§∞ ‡§¨‡•Å‡§ù‡•ç‡§® ‡§∏‡§ú‡§ø‡§≤‡•ã ‡§•‡§ø‡§Ø‡•ã?</label>
                        <div class="boolean-buttons" data-question="clear">
                            <button class="boolean-button" data-answer="thiyo">‡§•‡§ø‡§Ø‡•ã</button>
                            <button class="boolean-button" data-answer="thiyena">‡§•‡§ø‡§è‡§®</button>
                            <button class="boolean-button" data-answer="na">‡§•‡§æ‡§π‡§æ ‡§õ‡•à‡§®</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>‡§∏‡•Å‡§ù‡§æ‡§µ‡§π‡§∞‡•Ç (Suggestions):</label>
                        <textarea placeholder="‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø‡§≤‡§æ‡§à ‡§ï‡§∏‡§∞‡•Ä ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ó‡§∞‡•ç‡§® ‡§∏‡§ï‡§ø‡§®‡•ç‡§õ?" rows="3"></textarea>
                    </div>
                </div>
            </div>

            <div class="clearfix" style="margin-top: 30px;">
                <button class="next-button" onclick="nextStep(5)" id="next4" disabled>‡§´‡§ø‡§°‡§¨‡•ç‡§Ø‡§æ‡§ï ‡§™‡•á‡§∂ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç ‚Üí</button>
            </div>
        </div>

        <!-- Step 5: Complete -->
        <div class="step" id="step5">
            <div class="success-message">
                <div style="font-size: 64px; margin-bottom: 20px;">üéâ</div>
                <h2>‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! (Thank You!)</h2>
                <p style="font-size: 18px; margin: 20px 0;">‡§§‡§™‡§æ‡§à‡§Ç‡§ï‡•ã ‡§´‡§ø‡§°‡§¨‡•ç‡§Ø‡§æ‡§ï ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•á‡§∂ ‡§ó‡§∞‡§ø‡§Ø‡•ã‡•§</p>
                <p style="color: #7f8c8d;">Your feedback has been submitted successfully.</p>
                
                <div style="margin-top: 30px;">
                    <button class="next-button" onclick="startOver()">üîÑ ‡§´‡•á‡§∞‡§ø ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç (Start Again)</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentStep = 1;
        let selectedData = {};
        let timerInterval;
        let startTime;
        let ratings = {};

        // District data
        const districtData = {
            "Koshi Province": ["Bhojpur", "Dhankuta", "Ilam", "Jhapa", "Khotang", "Morang", "Okhaldhunga", "Panchthar", "Sankhuwasabha", "Solukhumbu", "Sunsari", "Taplejung", "Tehrathum", "Udayapur"],
            "Madhesh Province": ["Bara", "Dhanusha", "Mahottari", "Parsa", "Rautahat", "Saptari", "Sarlahi", "Siraha"],
            "Bagmati Province": ["Bhaktapur", "Chitwan", "Dhading", "Dolakha", "Kathmandu", "Kavrepalanchok", "Lalitpur", "Makwanpur", "Nuwakot", "Ramechhap", "Rasuwa", "Sindhuli", "Sindhupalchok"],
            "Gandaki Province": ["Baglung", "Gorkha", "Kaski", "Lamjung", "Manang", "Mustang", "Myagdi", "Nawalpur (Bardaghat Susta East)", "Parbat", "Syangja", "Tanahun"],
            "Lumbini Province": ["Arghakhanchi", "Banke", "Bardiya", "Dang", "Eastern Rukum", "Gulmi", "Kapilvastu", "Parasi (Bardaghat Susta West)", "Palpa", "Pyuthan", "Rolpa", "Rupandehi"],
            "Karnali Province": ["Dailekh", "Dolpa", "Humla", "Jajarkot", "Jumla", "Kalikot", "Mugu", "Salyan", "Surkhet", "Western Rukum"],
            "Sudurpashchim Province": ["Achham", "Baitadi", "Bajhang", "Bajura", "Dadeldhura", "Darchula", "Doti", "Kailali", "Kanchanpur"]
        };

        // Service data
        const serviceData = {
            'dao': [
                { id: 'citizenship', name: 'Citizenship Certificate', nepali: '‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§§‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞' }
            ],
            'passport': [
                { id: 'passport_app', name: 'E-Passport Application', nepali: '‡§∞‡§æ‡§π‡§¶‡§æ‡§®‡•Ä ‡§Ü‡§µ‡•á‡§¶‡§®' }
            ],
            'transport': [
                { id: 'driving_license', name: 'Driving License', nepali: '‡§∏‡§µ‡§æ‡§∞‡•Ä ‡§ö‡§æ‡§≤‡§ï ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§™‡§§‡•ç‡§∞' },
                { id: 'vehicle_reg', name: 'Vehicle Registration', nepali: '‡§∏‡§µ‡§æ‡§∞‡•Ä ‡§¶‡§∞‡•ç‡§§‡§æ' }
            ]
        };

        // Update districts based on province selection
        function updateDistricts() {
            const province = document.getElementById('province').value;
            const districtSelect = document.getElementById('district');
            
            districtSelect.innerHTML = '<option value="">‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç... (Select District...)</option>';
            
            if (province && districtData[province]) {
                districtSelect.disabled = false;
                districtData[province].forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            } else {
                districtSelect.disabled = true;
            }
            
            updateNext(1);
        }

        // Update next button state
        function updateNext(step) {
            const nextBtn = document.getElementById(`next${step}`);
            
            if (step === 1) {
                const province = document.getElementById('province').value;
                const district = document.getElementById('district').value;
                nextBtn.disabled = !province || !district;
                
                if (province && district) {
                    selectedData.province = province;
                    selectedData.district = district;
                }
            }
        }

        // Select office type
        function selectOfficeType(type) {
            // Clear previous selections
            document.querySelectorAll('.office-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Select current card
            event.target.closest('.office-card').classList.add('selected');
            selectedData.officeType = type;
            
            // Show services
            const servicesSection = document.getElementById('services-section');
            const servicesList = document.getElementById('services-list');
            
            servicesSection.style.display = 'block';
            servicesList.innerHTML = '';
            
            serviceData[type].forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-card';
                serviceCard.onclick = () => selectService(service);
                serviceCard.innerHTML = `
                    <h4>${service.name}</h4>
                    <p>${service.nepali}</p>
                `;
                servicesList.appendChild(serviceCard);
            });
            
            document.getElementById('next2').disabled = true;
        }

        // Select service
        function selectService(service) {
            document.querySelectorAll('.service-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            event.target.closest('.service-card').classList.add('selected');
            selectedData.service = service;
            document.getElementById('next2').disabled = false;
        }

        // Move to next step
        function nextStep(step) {
            // Hide current step
            document.getElementById(`step${currentStep}`).classList.remove('active');
            
            // Update progress
            document.getElementById(`progress-${currentStep}`).classList.remove('active');
            document.getElementById(`progress-${currentStep}`).classList.add('completed');
            
            // Show next step
            currentStep = step;
            document.getElementById(`step${step}`).classList.add('active');
            document.getElementById(`progress-${step}`).classList.add('active');
            
            // Setup step-specific content
            if (step === 2) {
                document.getElementById('location-info').textContent = `üìç ‡§∏‡•ç‡§•‡§æ‡§®: ${selectedData.district}, ${selectedData.province}`;
            } else if (step === 3) {
                document.getElementById('office-info').textContent = `‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø: ${getOfficeName(selectedData.officeType)} - ${selectedData.district}`;
                document.getElementById('service-info').textContent = `‡§∏‡•á‡§µ‡§æ: ${selectedData.service.name} (${selectedData.service.nepali})`;
            }
        }

        // Get office name
        function getOfficeName(type) {
            const names = {
                'dao': 'District Administration Office',
                'passport': 'Passport Department',
                'transport': 'Transport Management Office'
            };
            return names[type] || type;
        }

        // Start timer
        function startTimer() {
            document.getElementById('timer-instructions').style.display = 'none';
            document.getElementById('timer-running').style.display = 'block';
            
            startTime = new Date();
            timerInterval = setInterval(updateTimer, 1000);
        }

        // Update timer display
        function updateTimer() {
            const now = new Date();
            const elapsed = Math.floor((now - startTime) / 1000);
            
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            const timerElement = document.getElementById('timer-display');
            
            timerElement.textContent = display;
            
            // Change color based on time
            if (elapsed > 1800) { // > 30 minutes
                timerElement.className = 'timer-time danger';
            } else if (elapsed > 900) { // > 15 minutes
                timerElement.className = 'timer-time warning';
            }
        }

        // End visit
        function endVisit(status) {
            clearInterval(timerInterval);
            
            const endTime = new Date();
            const totalMinutes = Math.floor((endTime - startTime) / (1000 * 60));
            
            selectedData.waitTime = totalMinutes;
            selectedData.status = status;
            
            document.getElementById('visit-summary').textContent = 
                `‚è±Ô∏è ‡§ï‡•Å‡§≤ ‡§∏‡§Æ‡§Ø: ${totalMinutes} ‡§Æ‡§ø‡§®‡•á‡§ü (Total time: ${totalMinutes} minutes) | üìä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø: ${status === 'success' ? '‚úÖ ‡§ï‡§æ‡§Æ ‡§≠‡§Ø‡•ã (Successful)' : '‚ùå ‡§ï‡§æ‡§Æ ‡§≠‡§è‡§® (Failed)'}`;
            
            // Initialize star ratings
            initializeStarRatings();
            initializeBooleanQuestions();
            
            nextStep(4);
        }

        // Initialize star ratings
        function initializeStarRatings() {
            document.querySelectorAll('.stars').forEach(starsContainer => {
                starsContainer.innerHTML = '';
                const ratingType = starsContainer.dataset.rating;
                
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('span');
                    star.className = 'star';
                    star.textContent = '‚òÜ';
                    star.onclick = () => setRating(ratingType, i);
                    starsContainer.appendChild(star);
                }
            });
        }

        // Set rating
        function setRating(type, rating) {
            ratings[type] = rating;
            
            const starsContainer = document.querySelector(`[data-rating="${type}"]`);
            const stars = starsContainer.querySelectorAll('.star');
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.textContent = '‚òÖ';
                    star.classList.add('selected');
                } else {
                    star.textContent = '‚òÜ';
                    star.classList.remove('selected');
                }
            });
            
            checkRatingComplete();
        }

        // Initialize boolean questions
        function initializeBooleanQuestions() {
            document.querySelectorAll('.boolean-buttons').forEach(buttonGroup => {
                buttonGroup.querySelectorAll('.boolean-button').forEach(button => {
                    button.onclick = function() {
                        // Clear previous selection
                        buttonGroup.querySelectorAll('.boolean-button').forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        
                        // Select current button
                        this.classList.add('selected');
                        checkRatingComplete();
                    };
                });
            });
        }

        // Check if rating is complete
        function checkRatingComplete() {
            const requiredRatings = ['overall', 'staff', 'cleanliness', 'efficiency', 'clarity'];
            const allRated = requiredRatings.every(rating => ratings[rating] > 0);

            const requiredQuestions = ['bribe', 'rooms', 'helpful', 'clear', 'dalal'];
            const allQuestionsAnswered = requiredQuestions.every(question => {
                const buttonGroup = document.querySelector(`[data-question="${question}"]`);
                return buttonGroup.querySelector('.selected');
            });
            
            document.getElementById('next4').disabled = !allRated || !allQuestionsAnswered;
        }

        // Start over
        function startOver() {
            currentStep = 1;
            selectedData = {};
            ratings = {};
            
            // Reset all progress steps
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`step${i}`).classList.remove('active');
                document.getElementById(`progress-${i}`).classList.remove('active', 'completed');
            }
            
            // Show first step
            document.getElementById('step1').classList.add('active');
            document.getElementById('progress-1').classList.add('active');
            
            // Reset forms
            document.getElementById('province').value = '';
            document.getElementById('district').value = '';
            document.getElementById('district').disabled = true;
            document.getElementById('next1').disabled = true;
        }

        // Initial setup
        window.onload = function() {
            console.log('üá≥üáµ Nepal Office Tracker Demo Loaded');
        };
    </script>
</body>
</html>